<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:epub="http://www.idpf.org/2007/ops">
   <head>
      <title>EPUB3 Ideas</title>
      <meta name="DC.TITLE" content="EPUB3 Ideas" />
      <meta name="DC.CREATOR" content="J. Tynan Burke" />
      <meta name="DC.FORMAT" content="EPUB3" />
      <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
      <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
      <script src="js/jqMin.js" type="text/javascript"></script>
      <script src="js/jqCycle.js" type="text/javascript"></script>
      <script type="text/javascript" src="js/script.js"></script>
      <script type="text/javascript" src="js/bootstrap.js"></script>
   </head>
   <body>
      <h1>Text highlighting:</h1>
      <p>The text highlighting feature bears some explanation. Here's the sample 
         code for this section:</p>
      
      <p><code>&lt;div class="banquo"&gt; &lt;span class="highlighter"&gt;&lt;b&gt; BANQUO:&lt;/b&gt;&lt;/span&gt;
         &lt;p&gt;Do you not hope your children shall be kings?&lt;/p&gt;
         &lt;/div&gt;
         &lt;div class="macbeth"&gt; &lt;span class="highlighter"&gt;&lt;b&gt; MACBETH:&lt;/b&gt;&lt;/span&gt;
         &lt;p&gt;So foul and fair a day I have not seen.&lt;/p&gt;
         &lt;/div&gt;
         &lt;div class="banquo"&gt; &lt;span class="highlighter"&gt;&lt;b&gt; BANQUO:&lt;/b&gt;&lt;/span&gt;
         &lt;p&gt;Speak then to me, who neither beg nor fear your favours nor your hate.&lt;/p&gt;
         &lt;/div&gt;
         &lt;div class="macbeth"&gt; &lt;span class="highlighter"&gt;&lt;b&gt; MACBETH:&lt;/b&gt;&lt;/span&gt;         
         &lt;p&gt;This line, not by the bard, pads out this scene.&lt;/p&gt;
         &lt;/div&gt;</code></p>
      
      <p>The <code>span</code>s with class 'highlighter' surround the content that 
         I want to toggle the highlighting, in this case, the speaker's name, though 
         it can be arbitrary content and does not even need to be a <code>span</code>. 
         The way the javascript functions is by selecting the parent of the 'highlighter' 
         and toggling the background color of that element between white and yellow, as 
         well as every other document of its class. Here, the highlighter is changing 
         the background of the two <code>div</code> elements with classes <code>macbeth</code> 
         and <code>banquo</code>, respectively. It is important to note that the highlighter 
         element <b>must</b>, in the present configuration, be the <i>child</i> - not just 
         a <i>descendant</i> - of the element whose class you wish to highlight. Take 
         care, also, to ensure that the element whose class you wish to highlight only 
         has <i>one</i> class.
      </p>
      
      <p>If you'd like to give the line of dialogue a formatting class in addition to 
         the class-to-be-highlighted - if, for instance, you'd like something like 
         &lt;div class="banquo dialogue"&gt; - feel free to wrap &lt;div class="banquo"&gt; 
         in an extra div with the class of dialogue, or whatever you decide you'd like 
         to use.</p>
      
      <p>Click the characters' names to toggle highlighting on and off.</p>
      
      <div class="banquo"> <span class="highlighter"><b> BANQUO:</b></span>
         <p>Do you not hope your children shall be kings?</p>
      </div>
      
      <div class="macbeth"> <span class="highlighter"><b> MACBETH:</b></span>
         <p>So foul and fair a day I have not seen.</p>
      </div>
      
      <div class="banquo"> <span class="highlighter"><b> BANQUO:</b></span>
         <p>Speak then to me, who neither beg nor fear your favours nor your hate.</p>
      </div>
      
      <div class="macbeth"> <span class="highlighter"><b> MACBETH:</b></span>         
         <p>This line, not by the bard, pads out this scene.</p>
      </div>
      
      <h1>Quizzes:</h1>
      <p>Here's the code for this section:</p>
      
      <p><code>
         &lt;div class="quiz"&gt;
         &lt;div class="question"&gt;
         &lt;p&gt;What is two plus two?&lt;/p&gt;
         &lt;ul&gt;
         &lt;li&gt;&lt;button class="btn answer wrong"&gt;Two &lt;span class="explanation"&gt;(Too many twos!)&lt;/span&gt;&lt;/button&gt;&lt;/li&gt;
         &lt;li&gt;&lt;button class="btn answer wrong"&gt;Three&lt;/button&gt;&lt;/li&gt;
         &lt;li&gt;&lt;button class="btn answer right"&gt;Four &lt;span class="explanation"&gt;(Four is also two &lt;i&gt;times&lt;/i&gt; two - or two squared!)&lt;/span&gt;&lt;/button&gt;&lt;/li&gt;
         &lt;/ul&gt;
         &lt;/div&gt;
         &lt;/div&gt;
      </code></p>
      
      <p>Quizzes are fairly straightforward. First, let me say that the classes 
         of quiz and question are simply for CSS formatting purposes and are not part 
         of the interactive function. Now then: to make a quiz, simply mark each 
         possible answer with the class 'answer', and indicate whether it is right or wrong 
         with classes as shown above. If you'd like to provide an explanation that is 
         displayed after the answer is selected, simply give it the class 'explanation'. 
         Remember that this is a javascript implementation, so quizzes won't work on 
         readers that don't allow javascript! Also, part of the code uses the jQuery 
         function <code>prepend</code> to add the <span class="wrongX">X </span> and 
         <span class="rightCheck">✓ </span> glyphs after an answer is selected; this 
         will only work on some devices, as not everything supports <code>prepend</code>.
      </p>
      
      <p>Lastly, not all devices (mostly the older ones) support external CSS 
         as is used in EPUB3. If there's an explanation that you'd prefer stay hidden 
         in the absence of external CSS support and javascript support, make sure to 
         add the style in-line like so: <code>&lt;span class="explanation" style="
            display:none;"&gt;</code>.</p>
      
      <p>Quiz results reset every time the user goes to a section of the book other than the one that contains the quiz. I use 'section' here to 
         refer to the XHTML documents that appear in the toc.ncx and toc.xhtml files. Those two files may have other names in other file packages, 
         but the names I've used here (as well as how they're described in content.opf) are EPUB3 <i>conventions</i>, if not strict requirements.</p>
      
      <div class="quiz">
         <h3>Quiz time!</h3>
         <div class="question">
            <p>What is two plus two?</p>
            <ul>
               <li><button class="btn answer wrong">Two <span class="explanation">(Too many twos!)</span></button></li>
               <li><button class="btn answer wrong">Three</button></li>
               <li><button class="btn answer right">Four <span class="explanation">(Four is also 
                  two <i>times</i> two - or two squared!)</span></button></li>
            </ul>
         </div>
      </div>
      
      <h1>Movies:</h1>
      <p>Fun fact: The open-source movie format WebM is the prefered distribution format 
         for EPUB3. <code>ffmpeg</code> is a command-line tool that some 
         readers may recognize; a command like <code>ffmpeg -i origin.mp4 output.webm</code> 
         will do the conversion for you. The software packages VLC and Miro Converter 
         can also perform this conversion for you, and have the advantage of a graphical 
         interface. A Google search for 'webm converter' can also help you pick the right 
         program for your system. To ensure that your videos work on a variety of systems, 
         you can provide multiple <code>source</code> elements inside the <code>video</code> 
         element, as I have done here.</p>
      
      <p>mp4 and similar formats <i>will</i> function on, for instance, the iPad, 
         but this is not a recommended use of the standard, as the Readium SDK does 
         not have the best support for them, and thus their use is best avoided; at the 
         very least, it is best to provide a webm-formatted video alongside whatever 
         your original formatting is. Please also note the <code>div</code> element with 
         the <code>class</code> "err"; this will be displayed in the event of the 
         hardware's inability to display your video file(s).</p>
      
      <p>Here's the source code for this example, followed by the example itself:</p>
      
      <p><code>
         &lt;video id="video1" controls="controls"&gt;
         &lt;source src="movieSample.mp4" type="video/mp4"/&gt;
         &lt;source src="movieSample.webm" type="video/webm"/&gt;
         &lt;div class="err"&gt;
         &lt;p&gt;
         Sorry, it appears your system 
         either does not support video 
         playback or cannot play the 
         MP4 and WebM formats provided.
         &lt;/p&gt;
         &lt;/div&gt;
         &lt;/video&gt;
      </code></p>
      <video id="video1" controls="controls">
         <source src="movies/movieSample.mp4" type="video/mp4"/>
         <source src="movies/movieSample.webm" type="video/webm"/>
         <div class="err">
            <p>
               Sorry, it appears your system 
               either does not support video 
               playback or cannot play the 
               MP4 and WebM formats provided.
            </p>
         </div>
      </video>
      
      <h1>Slideshows &amp; transitions:</h1>
      <p>
         Also included is the jQuery Cycle plugin, making slideshows a snap. This HTML:
      </p>

      <p><code>
       &lt;div class="slideshow1"&gt;
         &lt;div class="slideshow"&gt;
           &lt;img src="column-1.png"/&gt;
           &lt;img src="column-2.png"/&gt;
           &lt;img src="column-3.png"/&gt;
           &lt;/div&gt;         
         &lt;p id="slideshow1caption"&gt;&lt;/p&gt;
       &lt;/div&gt;         
      </code></p>
      
      <p>
         And this javascript:
      </p>

      <p><code>
     $('.slideshow').cycle({
       fx: 'shuffle',
       slideExpr: 'img',
       after: function() {
         var myClass = $(this).parent().parent().attr("class");
         $('.' + myClass + 'caption').html(this.alt);
       }
     });
      </code></p>

      <p>
         Makes this slideshow, which uses some random graphics I made a while back:
      </p>
   <div class="slideshow1">
      <div class="slideshow">
            <img src="images/column-1.png" alt="Picture caption 1"/>
            <img src="images/column-2.png" alt="Picture caption 2"/>
            <img src="images/column-3.png" alt="Picture caption 3"/>
      </div>
      <p class="slideshow1caption"></p>
   </div>

      <p>
         ...giving you an easy way to liven up any text, particularly educational material. To make 
         a basic slideshow, all you need to do is put images inside of a div classed 'slideshow'. 
         To make a slideshow with captions, use the structure shown above, where the slideshow div 
         is wrapped in another div, which also contains a paragraph with the class of the parent div's class plus 
         'caption'. In this example, the parent is 'slideshow1', and contains the basic 'slideshow' div 
         as well as a p with class 'slideshow1caption'.
      </p>


      <p>
         To customize the slideshow, check out <a href="http://malsup.com/jquery/cycle/">
            the documentation for jQuery Cycle</a>.
      </p>


      <h1>Bootstrap elements:</h1>
      <p>
         This package contains the popular Bootstrap HTML5 library, which is produced under the Apache License 2.0 by 
         Twitter. Web developers familiar with the library will find that many of the features integrate well into 
         EPUB3. As a simple yet relevant example, the button classes I used in the quiz section provide friendly 
         and pleasant interface elements that go a long way towards modernizing the look of your eBook.
      </p>

      <p>
         Bootstrap also has powerful fixed-layout and dynamic-layout classes, which I demonstrate below. Please note 
         that this might not display correctly on your device, and as such I recommend not relying on it unless you're 
         making a fixed-layout EPUB.
      </p>


      <div class="container">
         <div class="row"> 
            <div class="span4"><p>EPUB3 offers support for 
               not just reflowable text, but also both fixed and responsive layouts. This is not always 
               going to be the right thing to do, mind you. Childrens' books and technical manuals are 
               the two canonical examples of cases where it may be beneficial to use a fixed layout, 
               but it's going to display quite differently across a variety of devices and isn't always 
               a good idea. Remember, too, that one of the biggest advantages of the EPUB3 specification is 
               reflowable text, which does not work with a fixed layout.</p>
            </div>
            <div class="span4 offset1">
               <p>That being said, here's an example for you. I've set this code up to allow the author 
                  to use the popular Bootstrap library.</p>
            </div>
            <div class="span2">
               <p>Now, I'm overdoing it here, but it's for a good reason: to 
                  demonstrate the flexibility that's possible in the framework. 
                  It's also quite easy, and many of the world's website makers 
                  know how to use it already. So it's included in this package.</p>
            </div>
         </div>
         <div class="row">
            <div class="span12">
               <p><b>Let me emphasize that I don't think this is always a good idea.</b> 
                  It looks great on Readium, but not so great on something like 
                  an iPad. Further, making a true fixed-layout document function on the iPad right now requires 
                  much more sophisticated coding than I'm providing here, 
                  and the standards for fixed layout will likely change, possibly significantly, in the coming few years. 
                  Lastly, since fixed layouts tend to be graphic intensive and platform-dependent, I don't know 
                  how useful it will be to the community at large.</p>
            </div>
         </div>
      </div>
      
      <p>I leave it to the enterprising developer to figure out other ways of integrating Bootstrap materials into 
      the EPUB3 framework, though I might advise waiting until the readers are more standardized.</p>
      
      
      <h1>'Sliding' divs:</h1>

      <p>
         Consider a foreign language reading book, with the original text on one page, and vocabulary hints 
         on the facing page. This supplementary material is partially intended as a sort of crutch, somewhere 
         between making you work it out through context and looking it up in a dictionary. I have found it 
         to be a valuable learning method, with one notable shortfall - the desire to look at the vocabulary 
         page, at least for me, was often overwhelming, which undermined some of its educational value. Even 
         a fleeting glance at the vocabulary page would give me knowledge that would perhaps have been more 
         effective if earned through a bit more struggle. On an EPUB, you can hide this panel, making it visible 
         only on the reader's explicit request for assistance:
      </p>

      <p style="width: 70%; background-color: #ddd; padding-left: 20;">
         <span class="sliding slidIn">Hint
            <span class="sliderText"><b>Sohn am Ort</b> - the son in town
            <br/><b>Verkehr pflegte...</b> - to keep up contact...</span >
         </span>
         Dazu kam, dass meine Groszmutter nicht nur mit ihrem Sohn am Ort keinen regelmaeszigen Verkehr pflegte...
      </p>
      <br/><br/>
      
      <p>I've named these 'sliders'. Sliders come in four classes:</p>

      <p><code>
         &lt;span class="sliding slidIn"&gt;0
           &lt;span class="sliderText"&gt;sliding...&lt;/span &gt;
         &lt;/span&gt;
         
         &lt;span class="slidingSpan1 slidIn"&gt;1
           &lt;span class="sliderText"&gt;slidingSpan1...&lt;/span &gt;
         &lt;/span&gt;
         
         &lt;span class="slidingSpan2 slidIn"&gt;2
           &lt;span class="sliderText"&gt;slidingSpan2...&lt;/span &gt;
         &lt;/span&gt;

         &lt;span class="slidingSpan3 slidIn"&gt;3
           &lt;span class="sliderText"&gt;and slidingSpan3.&lt;/span &gt;
         &lt;/span&gt;
      </code></p>

      <p>
         These are of variable expanded widths, which is customizable in the CSS. They are visible by default, 
         and hidden on the load of the document in the javascript, which means that non-javascript-enabled readers 
         will simply show them as expanded. You can make a slider expanded by default by removing the 'slidIn' class.
      </p>

      <p>
         Please note that there is a very important semantic distinction to draw between these slider-classed 
         container elements and the <code>aside</code> element from HTML5. <code>aside</code> is rendered differently by 
         every e-reader - and sometimes not at all! But if you're looking to use footnotes and endnotes, you should 
         use the <code>aside</code> element to ensure proper indexing; these sliders are intended for more casual content, 
         or things like hints or annotations. For instance, if you are working with a text that references a painting, 
         an image of the painting can be included in a slider for those who haven't seen it, without interrupting 
         the flow of the text for those who have.
      </p>

      <p>
         For the record, here is how to implement references using the EPUB namespace and HTML5. 
         Here are the reference examples from International Digital Publishing Forum:
      </p>

      <p><code>&lt;p&gt;In that year&lt;a href="#ft2f" epub:type="noteref"&gt;2&lt;/a&gt; there were 67 mills engaged in the manufacture of cotton goods …&lt;/p&gt;
         
         &lt;aside id="ft2f" epub:type="footnote"&gt;
         &lt;p&gt;The manufacturing statistics for 1900 which follow are not those given in the Twelfth Census, but are taken from the &lt;em&gt;Census of Manufactures&lt;/em&gt; …&lt;/p&gt;
         &lt;/aside&gt;
         
         
         &lt;section epub:type="rearnotes"&gt; 
         &lt;h2&gt;End Notes&lt;/h2&gt;
         &lt;ol&gt;
         &lt;li id="en001" epub:type="rearnote"&gt;According to the usual nomenclature, the branch flowing S.W. is called the Chattooga; this unites with the Tallulah to form the Tugaloo, which …&lt;/li&gt;
         &lt;/ol&gt; 
         &lt;/section&gt;
      </code></p>
      
      
      <p>And here that is, as an actual part of this book:</p>
      <p>In that year<a href="#ft2f" epub:type="noteref">2</a> there were 67 mills engaged in the manufacture of cotton goods …</p>

      <aside id="ft2f" epub:type="footnote">
         <p>The manufacturing statistics for 1900 which follow are not those given in the Twelfth Census, but are taken from the <em>Census of Manufactures</em> …</p>
      </aside>
      
      <section epub:type="rearnotes"> 
         <h2>End Notes</h2>
         <ol>
            <li id="en001" epub:type="rearnote">According to the usual nomenclature, the branch flowing S.W. is called the Chattooga; this unites with the Tallulah to form the Tugaloo, which …</li>
         </ol> 
      </section>      

      <p>Note that the footnote linking doesn't work right on every reader, which is another advantage of sliders - 
      you don't have to leave the page.</p>

   </body>
</html>
